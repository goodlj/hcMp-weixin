(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pageA/deliveryOrder/deliveryOrder"],{"02a8":function(e,o,n){"use strict";(function(e,o){var t=n("4ea4");n("cd77");t(n("66fd"));var i=t(n("1184"));e.__webpack_require_UNI_MP_PLUGIN__=n,o(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},1184:function(e,o,n){"use strict";n.r(o);var t=n("66ba"),i=n("6528");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(o,e,(function(){return i[e]}))}(a);n("7435");var r=n("f0c5"),u=Object(r["a"])(i["default"],t["b"],t["c"],!1,null,"42106650",null,!1,t["a"],void 0);o["default"]=u.exports},6528:function(e,o,n){"use strict";n.r(o);var t=n("92ff"),i=n.n(t);for(var a in t)["default"].indexOf(a)<0&&function(e){n.d(o,e,(function(){return t[e]}))}(a);o["default"]=i.a},"66ba":function(e,o,n){"use strict";n.d(o,"b",(function(){return i})),n.d(o,"c",(function(){return a})),n.d(o,"a",(function(){return t}));var t={uToast:function(){return n.e("node-modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"8ee3"))},uSearch:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-search/u-search")]).then(n.bind(null,"e3df"))},uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,"7a43"))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"7ae9"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"34e6"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"702a"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"c216"))}},i=function(){var e=this,o=e.$createElement,n=(e._self._c,e.allList&&e.allList.length>0),t=e.isLoaded&&0==e.allList.length,i=e.unsignList&&e.unsignList.length>0,a=e.unsignLoaded&&0==e.unsignList.length,r=e.unoutboundList&&e.unoutboundList.length>0,u=e.unoutboundLoaded&&0==e.unoutboundList.length;e._isMounted||(e.e0=function(o){e.showPopup=!1}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:t,g2:i,g3:a,g4:r,g5:u}})},a=[]},7435:function(e,o,n){"use strict";var t=n("ced0"),i=n.n(t);i.a},"92ff":function(e,o,n){"use strict";(function(e,t){var i=n("4ea4");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=i(n("2eee")),r=i(n("c973")),u=i(n("448a")),s=(n("3022"),n("c1ea")),c={data:function(){return{labelParams:[],procurementOptions:[],showProcure:!1,procureColumns:[],showPopup:!1,orderValue:"",showStart:!1,showEnd:!1,current:0,allList:[],isLoaded:!1,total:0,queryParams:{pageNum:1,pageSize:10},unsignList:[],unsignLoaded:!1,unsignTotal:0,otherParams:{pageNum:1,pageSize:5},unoutboundTotal:0,unoutboundList:[],unoutboundLoaded:!1,list:[{name:"全部"},{name:"运输中"},{name:"未出库"}],selectedDuration:1,durationOptions:[{label:"近7天",value:1},{label:"近1个月",value:2},{label:"近3个月",value:3},{label:"近6个月",value:4},{label:"今年",value:5}]}},onReady:function(){},onLoad:function(e){e.tabIndex&&(this.current=Number(e.tabIndex)),this.getallList()},onShow:function(){},methods:{handleCode:function(o){var n=o.orderNo;e.navigateTo({url:"./supervisionCode/supervisionCode?orderNo=".concat(n)})},commonConfire:function(o){var n=o.orderNo,t={orderNo:n},i=this;e.showModal({title:"提示",content:"是否确认收货?",success:function(e){e.confirm&&i.request("orderapi/orderSure",t,"GET",{}).then((function(){i.getallList()}))}})},handleallConfirm:function(e){this.commonConfire(e)},handleunsignConfirm:function(e){this.commonConfire(e)},commonElec:function(o){e.showLoading({title:"文件下载中..."});var n=o.orderNo;e.downloadFile({url:"https://xhzl.sxhcyywl.com:1443/prod-api/orderapi/getElectron?orderNo=".concat(o.orderNo),filePath:"".concat(t.env.USER_DATA_PATH,"/").concat(n,".pdf"),header:{Authorization:"Bearer ".concat((0,s.getToken)())},success:function(o){if(console.log("文件下载",o),e.hideLoading(),200===o.statusCode){var n=o.filePath||o.tempFilePath;e.openDocument({filePath:n,fileType:"pdf",showMenu:!0,success:function(){e.hideLoading(),e.showToast({title:"文件已打开,请通过右上角菜单进行分析保存",icon:"none"})},fail:function(o){e.hideLoading(),e.showToast({title:"打开失败：".concat(o.errMsg||"未知错误"),icon:"none"})}})}else e.hideLoading(),e.showToast({title:"服务器错误：".concat(o.statusCode),icon:"none"})},fail:function(o){console.log("err",o),e.hideLoading(),e.showToast({title:"下载失败：".concat(o.errMsg),icon:"none"})}})},gotoSearch:function(){e.navigateTo({url:"orderSearch/orderSearch"})},handleunsingnNQuality:function(o){var n=o.orderNo,t=o.addTime;e.navigateTo({url:"/pageA/deliveryOrder/orderDetail/orderUnbound?orderNo=".concat(n,"&addTime=").concat(t)})},handleunsingnQuality:function(o){var n=o.orderNo,t=o.addTime;e.navigateTo({url:"orderDetail/orderPreview?orderNo=".concat(n,"&addTime=").concat(t)})},handleunsignElec:function(e){this.commonElec(e)},handleUnoutboundElec:function(e){this.commonElec(e)},handleUnoutboundQuality:function(o){var n=o.orderNo,t=o.addTime;e.navigateTo({url:"/pageA/deliveryOrder/orderDetail/orderUnbound?orderNo=".concat(n,"&addTime=").concat(t)})},getallList:function(){this.getwholeList(),this.getUnsignList(),this.getUnoutboundList()},handleGetprocure:function(){var e=this;this.showProcure=!0,this.hideKeyboard(),this.request("orderapi/OwnersList",{range:this.selectedDuration},"GET",{}).then((function(o){e.procureColumns=[],e.procureColumns.push(o.result),console.log("procureColumns",o.result,e.procureColumns)}))},hideKeyboard:function(){e.hideKeyboard()},resetProcure:function(){this.procurementOptions=[],this.labelParams=[]},selectProcure:function(o){console.log(o);var n=o.value[0],t=this.procurementOptions.some((function(e){return e.id===n.id}));t?e.showToast({title:"请勿重复选择",icon:"none"}):(this.procurementOptions.push(n),this.labelParams=this.procurementOptions.map((function(e){return e.lable})),console.log("labelParams",this.labelParams),this.showProcure=!1)},cancelProcure:function(){this.showProcure=!1},commonLogistics:function(o){var n=o.orderNo;e.navigateTo({url:"orderLogistics/orderLogistics?orderNo=".concat(n)})},handleLogistics:function(e){this.commonLogistics(e)},handleunsignLogistics:function(e){this.commonLogistics(e)},handleunboundLogistics:function(e){this.commonLogistics(e)},handleAllQuality:function(o){var n=o.orderNo,t=o.addTime;e.navigateTo({url:"/pageA/deliveryOrder/orderDetail/orderUnbound?orderNo=".concat(n,"&addTime=").concat(t)})},handleQuality:function(o){var n=o.orderNo,t=o.addTime;e.navigateTo({url:"orderDetail/orderPreview?orderNo=".concat(n,"&addTime=").concat(t)})},handleElec:function(e){this.commonElec(e)},getwholeList:function(){var o=this;e.showLoading({title:"加载中"});var n={pageNum:this.queryParams.pageNum,pageSize:this.queryParams.pageSize,range:this.selectedDuration,owner:this.labelParams};this.request("orderapi/orderList",n,"POST",{}).then((function(n){o.isLoaded=!0,e.hideLoading(),o.allList=[].concat((0,u.default)(o.allList),(0,u.default)(n.rows)),o.total=n.total})).catch((function(e){console.error("请求失败",e)})).finally((function(){e.hideLoading()}))},getUnsignList:function(){var o=this;e.showLoading({title:"加载中"});var n={pageNum:this.otherParams.pageNum,pageSize:this.otherParams.pageSize,range:this.selectedDuration,owner:this.labelParams};this.request("orderapi/UnSignInfo",n,"POST",{}).then((function(n){o.unsignLoaded=!0,e.hideLoading(),o.unsignList=[].concat((0,u.default)(o.unsignList),(0,u.default)(n.rows)),o.unsignTotal=n.total})).catch((function(e){console.error("请求失败",e)})).finally((function(){e.hideLoading()}))},getUnoutboundList:function(){var o=this;e.showLoading({title:"加载中"});var n={pageNum:this.otherParams.pageNum,pageSize:this.otherParams.pageSize,range:this.selectedDuration,owner:this.labelParams};this.request("orderapi/UnOutInfo",n,"POST",{}).then((function(n){o.unoutboundLoaded=!0,e.hideLoading(),o.unoutboundList=[].concat((0,u.default)(o.unoutboundList),(0,u.default)(n.rows)),o.unoutboundTotal=n.total})).catch((function(e){console.error("请求失败",e)})).finally((function(){e.hideLoading()}))},onReachBottom:function(){console.log("已经触底了"),console.log("tags",this.current),0==this.current&&(this.queryParams.pageNum*this.queryParams.pageSize>=this.total?(this.$refs.uToast.show({message:"加载完成",type:"default"}),console.log("1885544")):(this.queryParams.pageNum+=1,this.getwholeList())),1==this.current&&(this.otherParams.pageNum*this.otherParams.pageSize>=this.unsignTotal?this.$refs.uToast.show({message:"加载完成",type:"default"}):(this.otherParams.pageNum+=1,this.getUnsignList())),2==this.current&&(this.otherParams.pageNum*this.otherParams.pageSize>=this.unoutboundTotal?this.$refs.uToast.show({message:"加载完成",type:"default"}):(this.otherParams.pageNum+=1,this.getUnoutboundList()))},onPullDownRefresh:function(){var o=this;return(0,r.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o.procurementOptions=[],o.labelParams=[],o.queryParams.pageNum=1,o.otherParams.pageNum=1,o.total=0,o.allList=[],o.isLoaded=!1,o.unsignTotal=0,o.unsignList=[],o.unsignLoaded=!1,o.unoutboundTotal=0,o.unoutboundList=[],o.unoutboundLoaded=!1,n.prev=13,n.next=16,o.getallList();case 16:n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](13),o.$refs.uToast.show({message:"数据加载失败",type:"error"});case 21:return n.prev=21,e.stopPullDownRefresh(),n.finish(21);case 24:case"end":return n.stop()}}),n,null,[[13,18,21,24]])})))()},change:function(e){this.current=e.index},handleScreening:function(){this.queryParams.pageNum=1,this.otherParams.pageNum=1,this.orderValue="",this.showPopup=!0},selectDuration:function(e){this.selectedDuration=e,console.log("时间按钮",this.selectedDuration)},submit:function(){this.selectedDuration?(this.allList=[],this.unsignList=[],this.unoutboundList=[],this.getallList(),this.showPopup=!1):(e.showToast({title:"请先选择时间",icon:"none"}),this.showPopup=!0)},cancel:function(){this.procurementOptions=[],this.labelParams=[],this.showPopup=!1}}};o.default=c}).call(this,n("543d")["default"],n("bc2e")["default"])},ced0:function(e,o,n){}},[["02a8","common/runtime","common/vendor"]]]);