(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addCompany/addCompany"],{2965:function(e,o,t){"use strict";t.r(o);var n=t("3607"),r=t.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){t.d(o,e,(function(){return n[e]}))}(a);o["default"]=r.a},3607:function(e,o,t){"use strict";(function(e){var n=t("4ea4");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=n(t("9523")),a=t("c1ea");function i(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?i(Object(t),!0).forEach((function(o){(0,r.default)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var s={data:function(){return{tips:"",seconds:60,src:"https://xhzl.sxhcyywl.com:1443/prod-api/profile/upload/2025/05/15/7490cf7f4dbe590e1f82d3b1547a4ec6b080e3e6140a-8YDOzm_20250515024145A004.png",username:"",userinfo:{},savepth:"",isStorevalue:"",form:{nickName:"",userName:"",phone:"",companyName:"",isStore:"",verifyCode:""},showNature:!1,columns:[[{label:"连锁店",id:"Y"},{label:"非连锁",id:"N"}]],rules:{nickName:[{required:!0,message:"请输入昵称",trigger:["blur","change"]}],userName:[{required:!0,message:"请输入姓名",trigger:["blur","change"]}],companyName:[{required:!0,message:"请输入单位名称",trigger:["blur","change"]}],isStore:[{required:!0,message:"请选择单位性质",trigger:["blur","change"]}],verifyCode:[{required:!0,message:"请输入验证码",trigger:["blur","change"]}],phone:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:function(o,t,n){return e.$u.test.mobile(t)},message:"手机号码不正确",trigger:["change","blur"]}]}}},onReady:function(){this.$refs.uForm.setRules(this.rules)},onShow:function(){e.hideHomeButton()},methods:{codeChange:function(e){console.log("text",e),this.tips=e},validatePhone:function(e){return/^1[3-9]\d{9}$/.test(e)},getCode:function(){var o=this;this.validatePhone(this.form.phone)?this.$refs.uCode.canGetCode?(e.showLoading({title:"正在获取验证码"}),this.request("wxapi/send-code?phone=".concat(this.form.phone),{},"POST").then((function(t){200==t.code?(e.hideLoading(),e.$u.toast("验证码已发送"),o.$refs.uCode.start()):e.$u.toast(t.msg||"发送失败")})).catch((function(e){console.error("发送验证码失败",e)})).finally((function(){e.hideLoading()}))):e.$u.toast("倒计时结束后再发送"):e.$u.toast("请输入正确的手机号码")},hideKeyboard:function(){e.hideKeyboard()},companyNameBlur:function(o){var t=this;console.log("value",o),o?this.request("orderapi/getCustomer",{companyName:o},"GET",{}).then((function(o){if(0==o.data)e.showToast({title:o.msg,icon:"error"}),t.form.companyName="";else{var n=o.data.address,r=o.data.customerId;t.$set(t.form,"address",n),t.$set(t.form,"customerId",r),console.log("form",t.form)}})):e.showToast({title:"请填写单位名称",icon:"none"})},chooseaAatar:function(e){console.log(e),this.src=e.detail.avatarUrl,this.uploadFile(e.detail.avatarUrl)},uploadFile:function(o){var t=this;e.showLoading({title:"加载中..."}),e.uploadFile({url:(0,a.getConfig)().uploadUrl,fileType:"image",name:"file",filePath:o,header:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,a.getToken)())},success:function(o){e.hideLoading();var n=JSON.parse(o.data);console.log("r",n),200==n.code&&(t.savepth=n.url)},fail:function(e){console.log("err",e)}})},cancel:function(){e.navigateTo({url:"/pages/login/login"})},selectNature:function(e){console.log(e,e.value[0].id),this.form.isStore=e.value[0].label,console.log("isStore",this.form.isStore),this.isStorevalue=e.value[0].id,this.$refs.uForm.validateField("isStore"),this.showNature=!1},cancelNature:function(){this.showNature=!1},saveInfo:function(){var o=this;this.$refs.uForm.validate().then((function(t){var n=o;o.form.avatar=o.savepth;var r=u(u({},o.form),{},{isStore:o.isStorevalue});o.form.avatar?(e.showLoading({title:"保存中..."}),n.request("orderapi/userInfo",r,"POST").then((function(o){console.log("wxloginres: ",o),0!=o.data?(setTimeout((function(){e.hideLoading()}),2e3),(0,a.setUserInfo)(o.data),e.switchTab({url:"/pages/index/index"})):0==o.data&&e.$u.toast(o.msg)}))):e.showToast({title:"请上传头像信息",icon:"none"})})).catch((function(o){e.$u.toast("请填写完整信息")}))}}};o.default=s}).call(this,t("543d")["default"])},"85ea":function(e,o,t){"use strict";(function(e,o){var n=t("4ea4");t("cd77");n(t("66fd"));var r=n(t("c327"));e.__webpack_require_UNI_MP_PLUGIN__=t,o(r.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"90aa":function(e,o,t){"use strict";t.d(o,"b",(function(){return r})),t.d(o,"c",(function(){return a})),t.d(o,"a",(function(){return n}));var n={uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,"4b96"))},uForm:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form/u-form")]).then(t.bind(null,"a6f7"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"f4a9"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-input/u-input")]).then(t.bind(null,"0015"))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"b223"))},uCode:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-code/u-code")]).then(t.bind(null,"0b89"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"c216"))},uPicker:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-picker/u-picker")]).then(t.bind(null,"702a"))}},r=function(){var e=this,o=e.$createElement;e._self._c;e._isMounted||(e.e0=function(o){e.showNature=!0,e.hideKeyboard()})},a=[]},c327:function(e,o,t){"use strict";t.r(o);var n=t("90aa"),r=t("2965");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(o,e,(function(){return r[e]}))}(a);t("da7e");var i=t("f0c5"),u=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,"ab76e71a",null,!1,n["a"],void 0);o["default"]=u.exports},c757:function(e,o,t){},da7e:function(e,o,t){"use strict";var n=t("c757"),r=t.n(n);r.a}},[["85ea","common/runtime","common/vendor"]]]);