(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pageA/deliveryOrder/deliveryOrder"],{293:function(e,n,o){"use strict";(function(e,n){var t=o(4);o(26);t(o(25));var i=t(o(294));e.__webpack_require_UNI_MP_PLUGIN__=o,n(i.default)}).call(this,o(1)["default"],o(2)["createPage"])},294:function(e,n,o){"use strict";o.r(n);var t=o(295),i=o(297);for(var r in i)["default"].indexOf(r)<0&&function(e){o.d(n,e,(function(){return i[e]}))}(r);o(299);var a,u=o(42),s=Object(u["default"])(i["default"],t["render"],t["staticRenderFns"],!1,null,"387f24ec",null,!1,t["components"],a);s.options.__file="pageA/deliveryOrder/deliveryOrder.vue",n["default"]=s.exports},295:function(e,n,o){"use strict";o.r(n);var t=o(296);o.d(n,"render",(function(){return t["render"]})),o.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(n,"components",(function(){return t["components"]}))},296:function(e,n,o){"use strict";var t;o.r(n),o.d(n,"render",(function(){return i})),o.d(n,"staticRenderFns",(function(){return a})),o.d(n,"recyclableRender",(function(){return r})),o.d(n,"components",(function(){return t}));try{t={uToast:function(){return o.e("node-modules/uview-ui/components/u-toast/u-toast").then(o.bind(null,347))},uSearch:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-search/u-search")]).then(o.bind(null,484))},uTabs:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-tabs/u-tabs")]).then(o.bind(null,492))},uEmpty:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(o.bind(null,371))},uPopup:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(o.bind(null,516))},uPicker:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-picker/u-picker")]).then(o.bind(null,417))},uButton:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-button/u-button")]).then(o.bind(null,425))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,n=e.$createElement,o=(e._self._c,e.allList&&e.allList.length>0),t=e.isLoaded&&0==e.allList.length,i=e.unsignList&&e.unsignList.length>0,r=e.unsignLoaded&&0==e.unsignList.length,a=e.unoutboundList&&e.unoutboundList.length>0,u=e.unoutboundLoaded&&0==e.unoutboundList.length;e._isMounted||(e.e0=function(n){e.showPopup=!1}),e.$mp.data=Object.assign({},{$root:{g0:o,g1:t,g2:i,g3:r,g4:a,g5:u}})},r=!1,a=[];i._withStripped=!0},297:function(e,n,o){"use strict";o.r(n);var t=o(298),i=o.n(t);for(var r in t)["default"].indexOf(r)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(r);n["default"]=i.a},298:function(e,n,o){"use strict";(function(e,t){var i=o(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(o(30)),a=i(o(32)),u=i(o(18)),s=(o(34),o(33)),c={data:function(){return{labelParams:[],procurementOptions:[],showProcure:!1,procureColumns:[],showPopup:!1,orderValue:"",showStart:!1,showEnd:!1,current:0,allList:[],isLoaded:!1,total:0,queryParams:{pageNum:1,pageSize:10},unsignList:[],unsignLoaded:!1,unsignTotal:0,otherParams:{pageNum:1,pageSize:5},unoutboundTotal:0,unoutboundList:[],unoutboundLoaded:!1,list:[{name:"全部"},{name:"运输中"},{name:"未出库"}],selectedDuration:1,durationOptions:[{label:"近7天",value:1},{label:"近1个月",value:2},{label:"近3个月",value:3},{label:"近6个月",value:4},{label:"今年",value:5}]}},onReady:function(){},onLoad:function(e){e.tabIndex&&(this.current=Number(e.tabIndex)),this.getallList()},onShow:function(){},methods:{handleCode:function(n){var o=n.orderNo;e.navigateTo({url:"./supervisionCode/supervisionCode?orderNo=".concat(o)})},commonConfire:function(n){var o=n.orderNo,t={orderNo:o},i=this;e.showModal({title:"提示",content:"是否确认收货?",success:function(e){e.confirm&&i.request("orderapi/orderSure",t,"GET",{}).then((function(){i.getallList()}))}})},handleallConfirm:function(e){this.commonConfire(e)},handleunsignConfirm:function(e){this.commonConfire(e)},commonElec:function(n){e.showLoading({title:"文件下载中..."});var o=n.orderNo;e.downloadFile({url:"https://xhzl.sxhcyywl.com:1443/prod-api/orderapi/getElectron?orderNo=".concat(n.orderNo),filePath:"".concat(t.env.USER_DATA_PATH,"/").concat(o,".pdf"),header:{Authorization:"Bearer ".concat((0,s.getToken)())},success:function(n){if(console.log("文件下载",n),e.hideLoading(),200===n.statusCode){var o=n.filePath||n.tempFilePath;e.openDocument({filePath:o,fileType:"pdf",showMenu:!0,success:function(){e.hideLoading(),e.showToast({title:"文件已打开,请通过右上角菜单进行分析保存",icon:"none"})},fail:function(n){e.hideLoading(),e.showToast({title:"打开失败：".concat(n.errMsg||"未知错误"),icon:"none"})}})}else e.hideLoading(),e.showToast({title:"服务器错误：".concat(n.statusCode),icon:"none"})},fail:function(n){console.log("err",n),e.hideLoading(),e.showToast({title:"下载失败：".concat(n.errMsg),icon:"none"})}})},gotoSearch:function(){e.navigateTo({url:"orderSearch/orderSearch"})},handleunsingnNQuality:function(n){var o=n.orderNo,t=n.addTime;e.navigateTo({url:"/pageA/deliveryOrder/orderDetail/orderUnbound?orderNo=".concat(o,"&addTime=").concat(t)})},handleunsingnQuality:function(n){var o=n.orderNo,t=n.addTime;e.navigateTo({url:"orderDetail/orderPreview?orderNo=".concat(o,"&addTime=").concat(t)})},handleunsignElec:function(e){this.commonElec(e)},handleUnoutboundElec:function(e){this.commonElec(e)},handleUnoutboundQuality:function(n){var o=n.orderNo,t=n.addTime;e.navigateTo({url:"/pageA/deliveryOrder/orderDetail/orderUnbound?orderNo=".concat(o,"&addTime=").concat(t)})},getallList:function(){this.getwholeList(),this.getUnsignList(),this.getUnoutboundList()},handleGetprocure:function(){var e=this;this.showProcure=!0,this.hideKeyboard(),this.request("orderapi/OwnersList",{range:this.selectedDuration},"GET",{}).then((function(n){e.procureColumns=[],e.procureColumns.push(n.result),console.log("procureColumns",n.result,e.procureColumns)}))},hideKeyboard:function(){e.hideKeyboard()},resetProcure:function(){this.procurementOptions=[],this.labelParams=[]},selectProcure:function(n){console.log(n);var o=n.value[0],t=this.procurementOptions.some((function(e){return e.id===o.id}));t?e.showToast({title:"请勿重复选择",icon:"none"}):(this.procurementOptions.push(o),this.labelParams=this.procurementOptions.map((function(e){return e.lable})),console.log("labelParams",this.labelParams),this.showProcure=!1)},cancelProcure:function(){this.showProcure=!1},commonLogistics:function(n){var o=n.orderNo;e.navigateTo({url:"orderLogistics/orderLogistics?orderNo=".concat(o)})},handleLogistics:function(e){this.commonLogistics(e)},handleunsignLogistics:function(e){this.commonLogistics(e)},handleunboundLogistics:function(e){this.commonLogistics(e)},handleAllQuality:function(n){var o=n.orderNo,t=n.addTime;e.navigateTo({url:"/pageA/deliveryOrder/orderDetail/orderUnbound?orderNo=".concat(o,"&addTime=").concat(t)})},handleQuality:function(n){var o=n.orderNo,t=n.addTime;e.navigateTo({url:"orderDetail/orderPreview?orderNo=".concat(o,"&addTime=").concat(t)})},handleElec:function(e){this.commonElec(e)},getwholeList:function(){var n=this;e.showLoading({title:"加载中"});var o={pageNum:this.queryParams.pageNum,pageSize:this.queryParams.pageSize,range:this.selectedDuration,owner:this.labelParams};this.request("orderapi/orderList",o,"POST",{}).then((function(o){n.isLoaded=!0,e.hideLoading(),n.allList=[].concat((0,u.default)(n.allList),(0,u.default)(o.rows)),n.total=o.total})).catch((function(e){console.error("请求失败",e)})).finally((function(){e.hideLoading()}))},getUnsignList:function(){var n=this;e.showLoading({title:"加载中"});var o={pageNum:this.otherParams.pageNum,pageSize:this.otherParams.pageSize,range:this.selectedDuration,owner:this.labelParams};this.request("orderapi/UnSignInfo",o,"POST",{}).then((function(o){n.unsignLoaded=!0,e.hideLoading(),n.unsignList=[].concat((0,u.default)(n.unsignList),(0,u.default)(o.rows)),n.unsignTotal=o.total})).catch((function(e){console.error("请求失败",e)})).finally((function(){e.hideLoading()}))},getUnoutboundList:function(){var n=this;e.showLoading({title:"加载中"});var o={pageNum:this.otherParams.pageNum,pageSize:this.otherParams.pageSize,range:this.selectedDuration,owner:this.labelParams};this.request("orderapi/UnOutInfo",o,"POST",{}).then((function(o){n.unoutboundLoaded=!0,e.hideLoading(),n.unoutboundList=[].concat((0,u.default)(n.unoutboundList),(0,u.default)(o.rows)),n.unoutboundTotal=o.total})).catch((function(e){console.error("请求失败",e)})).finally((function(){e.hideLoading()}))},onReachBottom:function(){console.log("已经触底了"),console.log("tags",this.current),0==this.current&&(this.queryParams.pageNum*this.queryParams.pageSize>=this.total?(this.$refs.uToast.show({message:"加载完成",type:"default"}),console.log("1885544")):(this.queryParams.pageNum+=1,this.getwholeList())),1==this.current&&(this.otherParams.pageNum*this.otherParams.pageSize>=this.unsignTotal?this.$refs.uToast.show({message:"加载完成",type:"default"}):(this.otherParams.pageNum+=1,this.getUnsignList())),2==this.current&&(this.otherParams.pageNum*this.otherParams.pageSize>=this.unoutboundTotal?this.$refs.uToast.show({message:"加载完成",type:"default"}):(this.otherParams.pageNum+=1,this.getUnoutboundList()))},onPullDownRefresh:function(){var n=this;return(0,a.default)(r.default.mark((function o(){return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n.procurementOptions=[],n.labelParams=[],n.queryParams.pageNum=1,n.otherParams.pageNum=1,n.total=0,n.allList=[],n.isLoaded=!1,n.unsignTotal=0,n.unsignList=[],n.unsignLoaded=!1,n.unoutboundTotal=0,n.unoutboundList=[],n.unoutboundLoaded=!1,o.prev=13,o.next=16,n.getallList();case 16:o.next=21;break;case 18:o.prev=18,o.t0=o["catch"](13),n.$refs.uToast.show({message:"数据加载失败",type:"error"});case 21:return o.prev=21,e.stopPullDownRefresh(),o.finish(21);case 24:case"end":return o.stop()}}),o,null,[[13,18,21,24]])})))()},change:function(e){this.current=e.index},handleScreening:function(){this.queryParams.pageNum=1,this.otherParams.pageNum=1,this.orderValue="",this.showPopup=!0},selectDuration:function(e){this.selectedDuration=e,console.log("时间按钮",this.selectedDuration)},submit:function(){this.selectedDuration?(this.allList=[],this.unsignList=[],this.unoutboundList=[],this.getallList(),this.showPopup=!1):(e.showToast({title:"请先选择时间",icon:"none"}),this.showPopup=!0)},cancel:function(){this.procurementOptions=[],this.labelParams=[],this.showPopup=!1}}};n.default=c}).call(this,o(2)["default"],o(1)["default"])},299:function(e,n,o){"use strict";o.r(n);var t=o(300),i=o.n(t);for(var r in t)["default"].indexOf(r)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(r);n["default"]=i.a},300:function(e,n,o){}},[[293,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pageA/deliveryOrder/deliveryOrder.js.map