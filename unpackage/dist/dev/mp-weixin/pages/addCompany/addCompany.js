(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addCompany/addCompany"],{191:function(e,n,o){"use strict";(function(e,n){var t=o(4);o(26);t(o(25));var r=t(o(192));e.__webpack_require_UNI_MP_PLUGIN__=o,n(r.default)}).call(this,o(1)["default"],o(2)["createPage"])},192:function(e,n,o){"use strict";o.r(n);var t=o(193),r=o(195);for(var i in r)["default"].indexOf(i)<0&&function(e){o.d(n,e,(function(){return r[e]}))}(i);o(197);var u,a=o(42),s=Object(a["default"])(r["default"],t["render"],t["staticRenderFns"],!1,null,"dfe81474",null,!1,t["components"],u);s.options.__file="pages/addCompany/addCompany.vue",n["default"]=s.exports},193:function(e,n,o){"use strict";o.r(n);var t=o(194);o.d(n,"render",(function(){return t["render"]})),o.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(n,"components",(function(){return t["components"]}))},194:function(e,n,o){"use strict";var t;o.r(n),o.d(n,"render",(function(){return r})),o.d(n,"staticRenderFns",(function(){return u})),o.d(n,"recyclableRender",(function(){return i})),o.d(n,"components",(function(){return t}));try{t={uAvatar:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-avatar/u-avatar")]).then(o.bind(null,386))},uForm:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-form/u-form")]).then(o.bind(null,394))},uFormItem:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(o.bind(null,401))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-input/u-input")]).then(o.bind(null,409))},uIcon:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(o.bind(null,362))},uCode:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-code/u-code")]).then(o.bind(null,702))},uButton:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-button/u-button")]).then(o.bind(null,425))},uPicker:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-picker/u-picker")]).then(o.bind(null,417))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.showNature=!0,e.hideKeyboard()})},i=!1,u=[];r._withStripped=!0},195:function(e,n,o){"use strict";o.r(n);var t=o(196),r=o.n(t);for(var i in t)["default"].indexOf(i)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(i);n["default"]=r.a},196:function(e,n,o){"use strict";(function(e){var t=o(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t(o(11)),i=o(33);function u(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?u(Object(o),!0).forEach((function(n){(0,r.default)(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var s={data:function(){return{tips:"",seconds:60,src:"https://xhzl.sxhcyywl.com:1443/prod-api/profile/upload/2025/05/15/7490cf7f4dbe590e1f82d3b1547a4ec6b080e3e6140a-8YDOzm_20250515024145A004.png",username:"",userinfo:{},savepth:"",isStorevalue:"",form:{nickName:"",userName:"",phone:"",companyName:"",isStore:"",verifyCode:""},showNature:!1,columns:[[{label:"连锁店",id:"Y"},{label:"非连锁",id:"N"}]],rules:{nickName:[{required:!0,message:"请输入昵称",trigger:["blur","change"]}],userName:[{required:!0,message:"请输入姓名",trigger:["blur","change"]}],companyName:[{required:!0,message:"请输入单位名称",trigger:["blur","change"]}],isStore:[{required:!0,message:"请选择单位性质",trigger:["blur","change"]}],verifyCode:[{required:!0,message:"请输入验证码",trigger:["blur","change"]}],phone:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:function(n,o,t){return e.$u.test.mobile(o)},message:"手机号码不正确",trigger:["change","blur"]}]}}},onReady:function(){this.$refs.uForm.setRules(this.rules)},onShow:function(){e.hideHomeButton()},methods:{codeChange:function(e){console.log("text",e),this.tips=e},validatePhone:function(e){return/^1[3-9]\d{9}$/.test(e)},getCode:function(){var n=this;this.validatePhone(this.form.phone)?this.$refs.uCode.canGetCode?(e.showLoading({title:"正在获取验证码"}),this.request("wxapi/send-code?phone=".concat(this.form.phone),{},"POST").then((function(o){200==o.code?(e.hideLoading(),e.$u.toast("验证码已发送"),n.$refs.uCode.start()):e.$u.toast(o.msg||"发送失败")})).catch((function(e){console.error("发送验证码失败",e)})).finally((function(){e.hideLoading()}))):e.$u.toast("倒计时结束后再发送"):e.$u.toast("请输入正确的手机号码")},hideKeyboard:function(){e.hideKeyboard()},companyNameBlur:function(n){var o=this;console.log("value",n),n?this.request("orderapi/getCustomer",{companyName:n},"GET",{}).then((function(n){if(0==n.data)e.showToast({title:n.msg,icon:"error"}),o.form.companyName="";else{var t=n.data.address,r=n.data.customerId;o.$set(o.form,"address",t),o.$set(o.form,"customerId",r),console.log("form",o.form)}})):e.showToast({title:"请填写单位名称",icon:"none"})},chooseaAatar:function(e){console.log(e),this.src=e.detail.avatarUrl,this.uploadFile(e.detail.avatarUrl)},uploadFile:function(n){var o=this;e.showLoading({title:"加载中..."}),e.uploadFile({url:(0,i.getConfig)().uploadUrl,fileType:"image",name:"file",filePath:n,header:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,i.getToken)())},success:function(n){e.hideLoading();var t=JSON.parse(n.data);console.log("r",t),200==t.code&&(o.savepth=t.url)},fail:function(e){console.log("err",e)}})},cancel:function(){e.navigateTo({url:"/pages/login/login"})},selectNature:function(e){console.log(e,e.value[0].id),this.form.isStore=e.value[0].label,console.log("isStore",this.form.isStore),this.isStorevalue=e.value[0].id,this.$refs.uForm.validateField("isStore"),this.showNature=!1},cancelNature:function(){this.showNature=!1},saveInfo:function(){var n=this;this.$refs.uForm.validate().then((function(o){var t=n;n.form.avatar=n.savepth;var r=a(a({},n.form),{},{isStore:n.isStorevalue});n.form.avatar?(e.showLoading({title:"保存中..."}),t.request("orderapi/userInfo",r,"POST").then((function(n){console.log("wxloginres: ",n),0!=n.data?(setTimeout((function(){e.hideLoading()}),2e3),(0,i.setUserInfo)(n.data),e.switchTab({url:"/pages/index/index"})):0==n.data&&e.$u.toast(n.msg)}))):e.showToast({title:"请上传头像信息",icon:"none"})})).catch((function(n){e.$u.toast("请填写完整信息")}))}}};n.default=s}).call(this,o(2)["default"])},197:function(e,n,o){"use strict";o.r(n);var t=o(198),r=o.n(t);for(var i in t)["default"].indexOf(i)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(i);n["default"]=r.a},198:function(e,n,o){}},[[191,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/addCompany/addCompany.js.map